<?php
/************************************************
 * تعيين المنطقة الزمنية الافتراضية
 * تحدد التوقيت الذي ستعتمد عليه جميع دوال التاريخ
 ************************************************/
date_default_timezone_set("Asia/Riyadh");
/*
 * ترجع اسم المنطقة الزمنية الحالية
 */
echo "المنطقة الزمنية الحالية: " . date_default_timezone_get() . "<hr>";
/************************************************
 * دوال التاريخ والوقت الأساسية
 ************************************************/
/*
 * date()
 * ترجع التاريخ والوقت الحالي حسب التنسيق المطلوب
 */
echo "date(): " . date("Y-m-d H:i:s") . "<br>";
/*
 * time()
 * ترجع الوقت الحالي بصيغة Timestamp
 * (عدد الثواني منذ 1 يناير 1970)
 */
echo "time(): " . time() . "<br>";
/*
 * gmdate()
 * ترجع التاريخ والوقت بتوقيت GMT
 */
echo "gmdate(): " . gmdate("Y-m-d H:i:s") . "<br>";
/*
 * microtime(true)
 * ترجع الوقت الحالي مع أجزاء من الثانية
 * تُستخدم لقياس زمن التنفيذ
 */
echo "microtime(): " . microtime(true) . "<hr>";
/************************************************
 * التحويل بين النص و Timestamp
 ************************************************/
/*
 * strtotime()
 * تحويل نص تاريخ أو وقت إلى Timestamp
 */
$timestamp = strtotime("2025-12-31 23:59:59");
echo "strtotime(): " . $timestamp . "<br>";
/*
 * تحويل Timestamp إلى تاريخ باستخدام date()
 */
echo "تحويل Timestamp إلى تاريخ: " . date("Y-m-d H:i:s", $timestamp) . "<br>";
/*
 * mktime()
 * إنشاء Timestamp من (ساعة، دقيقة، ثانية، شهر، يوم، سنة)
 */
$mk = mktime(10, 30, 0, 5, 15, 2025);
echo "mktime(): " . date("Y-m-d H:i:s", $mk) . "<hr>";
/************************************************
 * دوال ترجع التاريخ على شكل مصفوفة
 ************************************************/
/*
 * getdate()
 * ترجع مصفوفة تحتوي تفاصيل التاريخ الحالي
 */
echo "<pre>";
print_r(getdate());
/*
 * localtime()
 * ترجع الوقت المحلي كمصفوفة
 */
print_r(localtime(time(), true));
echo "</pre><hr>";
/************************************************
 * التحقق من صحة التاريخ
 ************************************************/
/*
 * checkdate()
 * تتحقق من أن التاريخ صحيح أم لا
 */
echo "checkdate(2,29,2024): ";
var_dump(checkdate(2, 29, 2024));
echo "<hr>";
/************************************************
 * دوال المناطق الزمنية
 ************************************************/
/*
 * timezone_identifiers_list()
 * ترجع مصفوفة بجميع المناطق الزمنية المتاحة
 */
$timezones = timezone_identifiers_list();
echo "عدد المناطق الزمنية: " . count($timezones) . "<br>";
echo "مثال منطقة زمنية: " . $timezones[0] . "<hr>";
/************************************************
 * DateTime و DateTimeZone (البرمجة الكائنية)
 ************************************************/
/*
 * DateTime
 * إنشاء كائن تاريخ ووقت
 */
$dt = new DateTime("now", new DateTimeZone("Asia/Riyadh"));
echo "DateTime (الرياض): " . $dt->format("Y-m-d H:i:s") . "<br>";
/*
 * setTimezone()
 * تغيير المنطقة الزمنية للكائن
 */
$dt->setTimezone(new DateTimeZone("Africa/Cairo"));
echo "بعد تغيير المنطقة (القاهرة): " . $dt->format("Y-m-d H:i:s") . "<hr>";
/************************************************
 * حساب الفرق بين تاريخين
 ************************************************/
/*
 * diff()
 * تحسب الفرق بين تاريخين
 */
$date1 = new DateTime("2023-01-01");
$date2 = new DateTime("2025-12-31");
$diff = $date1->diff($date2);
echo "الفرق بين التاريخين: ";
echo $diff->y . " سنة، ";
echo $diff->m . " شهر، ";
echo $diff->d . " يوم";
?>
